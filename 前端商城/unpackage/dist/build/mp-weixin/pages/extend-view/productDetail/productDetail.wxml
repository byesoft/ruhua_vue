<view class="container"><view class="tui-header-box" style="{{'height:'+(height+'px')+';'+('background:'+('rgba(255,255,255,'+opcity+')')+';')}}"><view class="tui-header" style="{{'padding-top:'+(top+'px')+';'+('opacity:'+(opcity)+';')}}">商品详情</view><view class="tui-header-icon" style="{{'margin-top:'+(top+'px')+';'}}"><view data-event-opts="{{[['tap',[['back',['$event']]]]]}}" class="tui-icon tui-icon-arrowleft tui-icon-back" style="{{'color:'+(opcity>=1?'#000':'#fff')+';'+('background:'+('rgba(0, 0, 0,'+iconOpcity+')')+';')}}" bindtap="__e"></view></view></view><view class="tui-banner-swiper"><swiper style="{{'height:'+(scrollH+'px')+';'}}" autoplay="{{true}}" interval="{{5000}}" duration="{{150}}" circular="{{true}}" data-event-opts="{{[['change',[['bannerChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{list.banner_imgs_url}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><swiper-item data-index="{{index}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" catchtap="__e"><image class="tui-slide-image _img" style="{{'height:'+(scrollH+'px')+';'}}" src="{{getimg+item}}"></image></swiper-item></block></block></swiper><tui-tag vue-id="1" type="translucent" shape="circleLeft" size="small" bind:__l="__l" vue-slots="{{['default']}}">{{bannerIndex+1+"\n\t\t/"+list.banner_imgs_url.length}}</tui-tag><block wx:if="{{discount_start==1}}"><block><block wx:if="{{!detail}}"><view class="xszk">限时折扣</view></block></block></block></view><view class="tui-pro-detail"><view class="tui-product-title tui-border-radius"><block wx:if="{{!detail}}"><view><block wx:if="{{discount_start==1}}"><block><view class="detail"><view><view class="tui-pro-pricebox tui-padding red"><view class="tui-pro-price"><view>￥<text class="tui-price">{{price}}</text></view></view></view><view class="tui-original-price tui-gray">价格<text class="tui-line-through">{{"￥"+list.market_price}}</text></view></view><view class="time"><view class="juli">距离活动结束还剩</view><uni-countdown vue-id="2" day="{{discount_time.days}}" border-color="#FF4342" color="#FF4342" splitor-color="#fff" hour="{{discount_time.hours}}" minute="{{discount_time.minutes}}" second="{{discount_time.seconds}}" bind:__l="__l"></uni-countdown></view></view></block></block><block wx:else><block><view class="tui-pro-pricebox tui-padding"><view class="tui-pro-price"><view>{{(is_vip?'VIP':'¥')+''}}<text class="tui-price">{{price}}</text></view></view><block wx:if="{{is_vip}}"><view class="tui-original-price tui-gray" style="font-weight:100;flex-grow:1;">价格<text class="tui-line-through">{{"￥"+list.market_price}}</text></view></block></view></block></block></view></block><block wx:else><view><view class="tui-pro-pricebox tui-padding"><view class="tui-pro-price"><view>{{(is_vip?'VIP':'¥')+''}}<text class="tui-price">{{price}}</text></view></view><block wx:if="{{is_vip}}"><view class="tui-original-price tui-gray" style="font-weight:100;flex-grow:1;">价格<text class="tui-line-through">{{"￥"+list.market_price}}</text></view></block></view></view></block><view class="tui-pro-titbox"><view class="tui-pro-title">{{''+list.goods_name+''}}</view><button data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="tui-share-btn tui-share-position share" style="margin-top:-7px;" bindtap="__e"><tui-tag vue-id="3" type="gray" tui-tag-class="tui-tag-share tui-size" shape="circleLeft" size="small" bind:__l="__l" vue-slots="{{['default']}}"><view class="tui-icon tui-icon-partake" style="color:#999;font-size:15px;"></view><text class="tui-share-text tui-gray">分享</text></tui-tag></button></view><block wx:if="{{list.discount.discount}}"><view class="tui-padding"><block wx:if="{{list.discount.discount.start_time}}"><block><view class="tui-sub-title tui-size font-red">{{"此商品将于"+list.discount.discount.start_time+"开启限时折扣"}}</view></block></block><view class="tui-sale-info tui-size tui-gray"><view>{{"快递："+list.delivery.name}}</view><view>{{"月销："+list.sales}}</view><view>{{list.city}}</view></view></view></block></view><block wx:if="{{couponList.length>0}}"><view class="tui-discount-box tui-radius-all tui-mtop"><view data-event-opts="{{[['tap',[['toggleMask',['show']]]]]}}" class="tui-list-cell" bindtap="__e"><view class="tui-bold tui-cell-title">领券</view><view class="tui-tag-coupon-box"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index"><block wx:if="{{index<=2}}"><tui-tag vue-id="{{'4-'+index}}" size="small" type="red" shape="circle" tui-tag-class="tui-tag-coupon" bind:__l="__l" vue-slots="{{['default']}}">{{"满"+item.full+"减"+item.reduce}}</tui-tag></block></block></view><tui-icon class="tui-right tui-top40" vue-id="5" name="more-fill" size="{{20}}" color="#666" bind:__l="__l"></tui-icon></view></view></block><block wx:if="{{list.sku.length>0}}"><view class="tui-basic-info tui-mtop tui-radius-all"><view data-event-opts="{{[['tap',[['showPopup',['$event']]]]]}}" class="tui-list-cell" bindtap="__e"><view class="tui-bold tui-cell-title">已选</view><view class="tui-selected-box">{{xz_sku_name}}</view><tui-icon class="tui-right" vue-id="6" name="more-fill" size="{{20}}" color="#666" bind:__l="__l"></tui-icon></view></view></block><view class="tui-cmt-box tui-mtop tui-radius-all"><view class="tui-list-cell tui-last tui-between"><view class="tui-bold tui-cell-title">评价</view><view data-event-opts="{{[['tap',[['jump_toevaluate',['$0'],['list.goods_id']]]]]}}" bindtap="__e"><text class="tui-cmt-all">查看全部</text></view></view><block wx:if="{{applist}}"><view class="tui-cmt-content tui-padding"><block wx:if="{{applist.user}}"><view class="tui-cmt-user"><image class="tui-acatar" src="{{applist.user.headpic}}"></image><view>{{applist.user.nickname}}</view></view></block><view class="tui-cmt">{{applist.content}}</view></view></block><view class="tui-cmt-btn"><tui-tag vue-id="7" type="black" plain="{{true}}" tui-tag-class="tui-tag-cmt" data-event-opts="{{[['^tap',[['jump_toevaluate',['$0'],['list.goods_id']]]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}">查看全部评价</tui-tag></view></view><view class="tui-nomore-box"><tui-nomore vue-id="8" text="详情介绍" visible="{{true}}" bgcolor="#f7f7f7" bind:__l="__l"></tui-nomore></view><view class="tui-product-img tui-radius-all"><rich-text nodes="{{content}}"></rich-text></view><tui-nomore vue-id="9" text="已经到最底了" visible="{{true}}" bgcolor="#f7f7f7" bind:__l="__l"></tui-nomore><view class="tui-safearea-bottom"></view></view><view class="tui-operation"><view class="tui-operation-left tui-col-5"><view class="tui-operation-item" hover-class="opcity" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['jump_tohome',['$event']]]]]}}" bindtap="__e"><tui-icon vue-id="10" name="shop" size="{{22}}" color="#333" bind:__l="__l"></tui-icon><view class="tui-operation-text tui-scale-small">首页</view></view><view class="tui-operation-item" hover-class="opcity" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['jump_tocart',['$event']]]]]}}" bindtap="__e"><tui-icon vue-id="11" name="cart" size="{{22}}" color="#333" bind:__l="__l"></tui-icon><view class="tui-operation-text tui-scale-small">购物车</view><block wx:if="{{shop_car_num>0}}"><tui-badge vue-id="12" type="danger" size="small" bind:__l="__l" vue-slots="{{['default']}}">{{shop_car_num}}</tui-badge></block></view><view class="tui-operation-item" hover-class="opcity" hover-stay-time="{{150}}" data-event-opts="{{[['tap',[['collecting',['$event']]]]]}}" bindtap="__e"><tui-icon vue-id="13" name="{{collected?'like-fill':'like'}}" size="{{22}}" color="{{collected?'#ff201f':'#333'}}" bind:__l="__l"></tui-icon><view class="tui-operation-text tui-scale-small" style="{{(collected?'color: #ff201f;':'')}}">收藏</view></view><view class="tui-operation-item" hover-class="opcity" hover-stay-time="{{150}}"></view></view><view class="tui-operation-right tui-right-flex tui-col-7 tui-btnbox-4"><view class="tui-flex-1"><tui-button vue-id="14" type="danger" shape="circle" size="mini" data-event-opts="{{[['^click',[['showPopup']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">加入购物车</tui-button></view><view class="tui-flex-1"><tui-button vue-id="15" type="warning" shape="circle" size="mini" data-event-opts="{{[['^click',[['showPopup']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">立即购买</tui-button></view></view></view><tui-bottom-popup vue-id="16" show="{{popupShow}}" data-event-opts="{{[['^close',[['hidePopup']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="tui-popup-box"><view class="tui-product-box tui-padding"><image class="tui-popup-img _img" src="{{getimg+list.imgs}}"></image><view class="tui-popup-price"><view class="tui-amount tui-bold">{{"￥"+list.price}}</view><view class="tui-number"><block wx:if="{{list.sku_name}}"><text>{{list.sku_name}}</text></block><text>{{"库存："+list.stock}}</text></view></view></view><scroll-view class="tui-popup-scroll" scroll-y><view class="tui-scrollview-box"><block wx:for="{{sku_arr.tree}}" wx:for-item="item" wx:for-index="index"><view class="tui-bold tui-attr-title">{{item.k}}</view><view class="tui-attr-box"><block wx:for="{{item.v}}" wx:for-item="i" wx:for-index="j"><view data-event-opts="{{[['tap',[['xz_sku_cs',['s'+(index*1+1),'$0'],[[['sku_arr.tree','',index],['v','',j,'id']]]]]]]}}" class="{{[list.sku_arr.initialSku['s'+(index+1)]==i.id?'tui-attr-item-active':'tui-attr-item']}}" bindtap="__e"><view class="guige_03_01">{{''+i.name+''}}</view></view></block></view></block><view class="tui-number-box tui-bold tui-attr-title"><view class="tui-attr-title">数量</view><tui-numberbox vue-id="{{('17')+','+('16')}}" max="{{list.stock}}" min="{{1}}" value="{{num}}" data-event-opts="{{[['^change',[['sku_change_num']]]]}}" bind:change="__e" bind:__l="__l"></tui-numberbox></view></view></scroll-view><view class="tui-operation tui-operation-right tui-right-flex tui-popup-btn"><tui-button class="tui-flex-1" vue-id="{{('18')+','+('16')}}" type="red" tui-button-class="tui-btn-equals" shape="circle" size="mini" data-event-opts="{{[['^click',[['add_cart']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">加入购物车</tui-button><tui-button class="tui-flex-1" vue-id="{{('19')+','+('16')}}" type="warning" tui-button-class="tui-btn-equals" shape="circle" size="mini" data-event-opts="{{[['^click',[['add_shopping']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}">立即购买</tui-button></view><view data-event-opts="{{[['tap',[['hidePopup',['$event']]]]]}}" class="tui-icon tui-icon-close-fill tui-icon-close" style="color:#999;font-size:20px;" bindtap="__e"></view></view></tui-bottom-popup><view data-event-opts="{{[['tap',[['toggleMask',['$event']]]]]}}" class="{{['mask',maskState===0?'none':maskState===1?'show':'']}}" bindtap="__e"><view class="mask-content"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="coupon-item"><view class="con"><view class="left"><text class="title">{{item.name}}</text><text class="time">{{"有效期至"+item.end_time}}</text></view><view class="right"><text class="price">{{item.reduce}}</text><text>{{"满"+item.full+"可用"}}</text></view><view class="circle l"></view><view class="circle r"></view></view><view class="dott"><text class="tips">限新用户使用</text><view data-event-opts="{{[['tap',[['lq_coupon',['$0'],[[['couponList','',index,'id']]]]]]]}}" class="an _div" bindtap="__e">立即领取</view></view></view></block></view></view><block wx:if="{{is_share}}"><view class="sha_tan"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="mask" bindtap="__e"></view><view class="share_tan"><view class="s_title">— · 分享 · —</view><view><view class="s_t_x"><view class="s_t_l"><button class="s_t_l_s share" open-type="share"><image src="{{$root.m0}}" class="_img"></image></button></view><view class="s_t_l"><view data-event-opts="{{[['tap',[['shareFc',['$event']]]]]}}" class="s_t_l_s" bindtap="__e"><image src="{{$root.m1}}" class="_img"></image></view></view></view><view class="s_t_x"><view class="s_t_l"><button class="share" open-type="share">分享好友</button></view><view class="s_t_l"><view bindtap="show_hb">生成海报</view></view></view></view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="bye" bindtap="__e">取消</view></view></view></block><hch-poster class="vue-ref" vue-id="20" canvasFlag="{{canvasFlag}}" posterObj="{{posterData}}" data-ref="hchPoster" data-event-opts="{{[['^updateCanvasFlag',[['__set_sync',['$0','canvasFlag','$event'],['']]]],['^updateCanvasFlag',[['__set_sync',['$0','canvasFlag','$event'],['']]]],['^cancel',[['canvasCancel']]],['^updatePosterObj',[['__set_sync',['$0','posterData','$event'],['']]]],['^updatePosterObj',[['__set_sync',['$0','posterData','$event'],['']]]]]}}" bind:updateCanvasFlag="__e" bind:cancel="__e" bind:updatePosterObj="__e" bind:__l="__l"></hch-poster><view hidden="{{canvasFlag}}"><canvas class="canvas" canvas-id="myCanvas"></canvas></view></view>