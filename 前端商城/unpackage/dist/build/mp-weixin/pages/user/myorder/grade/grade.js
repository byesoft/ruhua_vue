(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/myorder/grade/grade"],{"0768":function(e,t,n){},"3bfa":function(e,t,n){"use strict";var o=n("0768"),r=n.n(o);r.a},"836b":function(e,t,n){"use strict";(function(e){n("c96d"),n("921b");o(n("66fd"));var t=o(n("a41f"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},a41f:function(e,t,n){"use strict";n.r(t);var o=n("cec6"),r=n("c44d");for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);n("3bfa");var i=n("2877"),s=Object(i["a"])(r["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},c44d:function(e,t,n){"use strict";n.r(t);var o=n("fdae"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=r.a},cec6:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},fdae:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,r,a,i){try{var s=e[a](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(o,r)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function s(e){a(i,o,r,s,u,"next",e)}function u(e){a(i,o,r,s,u,"throw",e)}s(void 0)})}}var s=function(){return n.e("components/uni/uni-rate/uni-rate").then(n.bind(null,"1943"))},u={data:function(){return{imgList:[],order:"",order_id:"",getimg:this.$getimg,form:[],grade_list:"",ImgBox:[]}},components:{uniRate:s},onLoad:function(){var t=e.getStorageSync("grade_pro");this.order=t.data,this.order_id=t.id,this.creat_obj()},onShow:function(){console.log("触发了onshow")},methods:{creat_obj:function(){var e=this.order.length;console.log(e);for(var t=[],n=[],o={goods_id:"",content:"",imgs:[],rate:""},r=0;r<e;r++)t[r]=o,n[r]=[];this.grade_list=t,this.ImgBox=n,console.log("ImgBox:",this.ImgBox)},sub_grade:function(){var t=i(o.default.mark(function t(){var n,r,a;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.showLoading({title:"提交中"}),e.hideLoading(),t.t0=o.default.keys(this.order);case 3:if((t.t1=t.t0()).done){t.next=13;break}return n=t.t1.value,r=this.order[n],t.next=8,this.uploads(n);case 8:this.grade_list[n].content=r.content,this.grade_list[n].goods_id=r.goods_id,this.grade_list[n].rate=r.rate,t.next=3;break;case 13:return a={id:this.order_id,json:this.grade_list},console.log(a),t.abrupt("return");case 17:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),uploads:function(){var e=i(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,r=[],console.log(n.ImgBox[t]),e.t0=o.default.keys(n.ImgBox[t]);case 4:if((e.t1=e.t0()).done){e.next=12;break}return a=e.t1.value,i=n.ImgBox[t][a],e.next=9,n.up_img(i);case 9:r[a]=e.sent,e.next=4;break;case 12:console.log("img:",r),this.grade_list[t].imgs.push(r);case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),up_img:function(t){return new Promise(function(n,o){e.uploadFile({url:"https://cy.qxnjssc.com/v1/up_img",filePath:t,name:"img",header:{token:e.getStorageSync("token")},formData:{user:"test"},success:function(e){n(e.data)}})})},ChooseImage:function(t){var n=this;e.chooseImage({count:20,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var o=n.ImgBox[t].length;0!=o?(console.log("add",e.tempFilePaths),n.ImgBox[t].splice(o-1,0,e.tempFilePaths)):(console.log("create",e.tempFilePaths),n.$set(n.ImgBox,t,e.tempFilePaths)),console.log(n.ImgBox)}})},ViewImage:function(t,n){var o=this,r=o.ImgBox[n];console.log(r,n),e.previewImage({urls:r,current:t.currentTarget.dataset.url})},DelImg:function(t,n){var o=this;console.log("del:",t.currentTarget.dataset.index,n),e.showModal({title:"删除",content:"确定要删除吗？",cancelText:"否",confirmText:"是",success:function(e){e.confirm&&o.ImgBox[n].splice(t.currentTarget.dataset.index,1)}})},get_rate:function(e){console.log(e),this.order[e.index]["rate"]=e.value}}};t.default=u}).call(this,n("543d")["default"])}},[["836b","common/runtime","common/vendor"]]]);