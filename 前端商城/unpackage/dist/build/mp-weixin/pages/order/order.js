(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"20c4":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n,e,o,r,i,a){try{var u=t[i](a),s=u.value}catch(c){return void e(c)}u.done?n(s):Promise.resolve(s).then(o,r)}function a(t){return function(){var n=this,e=arguments;return new Promise(function(o,r){var a=t.apply(n,e);function u(t){i(a,o,r,u,s,"next",t)}function s(t){i(a,o,r,u,s,"throw",t)}u(void 0)})}}var u=function(){return e.e("components/uni/uni-load-more/uni-load-more").then(e.bind(null,"9cc5"))},s=function(){return e.e("components/empty").then(e.bind(null,"d92e"))},c={components:{uniLoadMore:u,empty:s},data:function(){return{now_pay:0,now_drive:0,now_pinjia:0,getimg:this.$getimg,tabCurrentIndex:0,order_list:"",navList:[{state:0,text:"全部",loadingType:"more",orderList:[]},{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"待收货",loadingType:"more",orderList:[]},{state:3,text:"待评价",loadingType:"more",orderList:[]},{state:4,text:"售后",loadingType:"more",orderList:[]}]}},onLoad:function(t){this.get_order(),this.tabCurrentIndex=+t.state},methods:{jumo_tomyorder:function(n){t.navigateTo({url:"../user/myorder/myorder?id="+n})},get_order:function(){var t=this;this.$api.http.post("order/user/all_order").then(function(n){t.order_list=n.data,console.log(t.tabCurrentIndex)})},pay_again:function(){var t=a(o.default.mark(function t(n){var e;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.http.post("order/pay/pre_order",{id:n}).then(function(t){return console.log("pay:",t),t});case 2:return e=t.sent,t.next=5,this.onpay(e);case 5:case"end":return t.stop()}},t,this)}));function n(n){return t.apply(this,arguments)}return n}(),onpay:function(n){var e=this;t.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(t){console.log("success:"+JSON.stringify(t)),e.get_order()},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},loadData:function(t){},changeTab:function(t){this.tabClick(t.target.current)},tabClick:function(t){this.tabCurrentIndex=t,1==t&&(this.now_pay=0,this.now_drive=0,this.now_pinjia=0),2==t&&(this.now_pay=1,this.now_drive=0,this.now_pinjia=0),3==t&&(this.now_pay=1,this.now_drive=1,this.now_pinjia=0),4==t&&(this.now_pay=1,this.now_drive=1,this.now_pinjia=2)},deleteOrder:function(n){var e=this;t.showModal({title:"提示",content:"确定删除订单？",success:function(o){o.confirm?(console.log("用户点击确定"),e.$api.http.put("order/user/del_order?id="+n).then(function(n){t.showToast({title:"删除成功",duration:2e3}),e.get_order()})):o.cancel&&console.log("用户点击取消")}})},orderStateExp:function(t){var n="",e="#fa436a";switch(+t){case 1:n="待付款";break;case 2:n="待发货";break;case 9:n="订单已关闭",e="#909399";break}return{stateTip:n,stateTipColor:e}}},onPullDownRefresh:function(){this.get_order(),setTimeout(function(){t.stopPullDownRefresh()},2e3)}};n.default=c}).call(this,e("543d")["default"])},2599:function(t,n,e){},"5a84":function(t,n,e){"use strict";e.r(n);var o=e("b898"),r=e("dad0");for(var i in r)"default"!==i&&function(t){e.d(n,t,function(){return r[t]})}(i);e("971c");var a=e("2877"),u=Object(a["a"])(r["default"],o["a"],o["b"],!1,null,null,null);n["default"]=u.exports},"971c":function(t,n,e){"use strict";var o=e("2599"),r=e.n(o);r.a},b5b0:function(t,n,e){"use strict";(function(t){e("c96d"),e("921b");o(e("66fd"));var n=o(e("5a84"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},b898:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},r=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return r})},dad0:function(t,n,e){"use strict";e.r(n);var o=e("20c4"),r=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=r.a}},[["b5b0","common/runtime","common/vendor"]]]);