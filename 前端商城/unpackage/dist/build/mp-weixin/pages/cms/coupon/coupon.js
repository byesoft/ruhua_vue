(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cms/coupon/coupon"],{"18e7":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.show_cate_list=!0},t.e1=function(o){t.show_mail_list=!0},t.e2=function(o){t.show_cate_list=!1},t.e3=function(o){t.show_mail_list=!1})},i=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return i})},2467:function(t,o,e){},"29ed":function(t,o,e){"use strict";e.r(o);var n=e("18e7"),i=e("50b7");for(var s in i)"default"!==s&&function(t){e.d(o,t,function(){return i[t]})}(s);e("bc2b");var a=e("2877"),u=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,null,null);o["default"]=u.exports},"3b14":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;e("cdc3");function n(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var i=function(){return e.e("components/uni/uni-icon/uni-icon").then(e.bind(null,"e761"))},s=function(){return e.e("components/uni/uni-popup/uni-popup").then(e.bind(null,"95aa"))},a=function(){return e.e("components/plan-image-upload/up_img").then(e.bind(null,"f8a2"))},u={data:function(){var t=this.getDate({format:!0}),o=this.getDate_end({format:!0});return{status:[{value:"0",name:"一次"},{value:"1",name:"无限制"}],current:0,coupon_form:{status:"",full:"",reduce:"",name:"",stock:"",goods_ids:[],start_time:"",end_time:"",stock_type:"",day:""},product_cate:"",set:0,category_id:1,date:t,date_end:o,time:"12:01",threshold:1,sku:[],show_cate_list:!1,show_mail_list:!1,category_name:"固定时间",category_list:[{category_id:"1",category_name:"固定时间"},{category_id:"2",category_name:"领卷当日开始计算有效期"}],id:0,is_edit:!1,goods:n({banner_imgs:[],goods_name:"",category_id:"",description:"",price:"",vip_price:"",market_price:"",leixin:"1",fx_tc:"",sales:"",stock:"",content:""},"goods_name",""),mail:1,mail_list:[{id:"1",name:"全部商品",value:"0"},{id:"2",name:"指定商品可用"}],peisong:"",group:"未分组"}},components:{uniIcon:i,uniPopup:s,robbyImageUpload:a},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},watch:{},onLoad:function(t){this.id=t.id},onShow:function(){var o=t.getStorageSync("pro_id_list");console.log(o),this.coupon_form.goods_ids=o,console.log(this.coupon_form.goods_ids),t.removeStorageSync("pro_id_list")},methods:{DateChange:function(t){this.date=t.detail.value},DateChangeend:function(t){this.dateend=t.detail.value},setting:function(){this.set=1},radioChange:function(t){for(var o=0;o<this.status.length;o++)if(this.status[o].value===t.target.value){this.current=o,console.log(this.status[o].value),this.coupon_form.status=this.status[o].value;break}},getDate:function(t){var o=new Date,e=o.getFullYear(),n=o.getMonth()+1,i=(o.getMonth(),o.getDate());return"start"===t?e-=60:"end"===t&&(e+=2),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(e,"-").concat(n,"-").concat(i)},getDate_end:function(t){var o=new Date,e=o.getFullYear(),n=o.getMonth()+2,i=o.getDate();return"start"===t?e-=60:"end"===t&&(e+=20),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(e,"-").concat(n,"-").concat(i)},bindDateChange:function(t){this.date=t.target.value;var o=Date.parse(this.date);this.coupon_form.start_time=o/1e3},bindDateChange_end:function(t){this.date_end=t.target.value;var o=Date.parse(this.date_end);this.coupon_form.end_time=o/1e3,console.log(this.coupon_form.end_time)},switch1Change:function(){1==this.threshold?(this.threshold=0,this.coupon_form.full=0):this.threshold=1},sub:function(){var o=this;console.log(this.coupon_form),this.coupon_form.stock?this.coupon_form.stock_type="1":this.coupon_form.stock_type="0",2==this.category_id?this.$api.http.post("shop_cms/add_shop_coupon",{stock_type:this.coupon_form.stock_type,full:this.coupon_form.full,name:this.coupon_form.name,reduce:this.coupon_form.reduce,status:this.coupon_form.status,goods_ids:this.coupon_form.goods_ids,day:this.coupon_form.day}).then(function(e){o.$api.msg("添加成功"),t.redirectTo({url:"../couponlist/couponlist"})}):this.$api.http.post("shop_cms/add_shop_coupon",{stock_type:this.coupon_form.stock_type,full:this.coupon_form.full,name:this.coupon_form.name,reduce:this.coupon_form.reduce,status:this.coupon_form.status,goods_ids:this.coupon_form.goods_ids,start_time:this.coupon_form.start_time,end_time:this.coupon_form.end_time}).then(function(e){console.log(o.coupon_form.end_time),o.$api.msg("添加成功"),t.redirectTo({url:"../couponlist/couponlist"})})},compressImg:function(t){console.log(t)},changeIndicatorDots:function(t){this.isYasuo=!this.isYasuo},cate_change:function(t){var o=t.detail.value;this.category_id=this.category_list[o].category_id,this.category_name=this.category_list[o].category_name,this.show_cate_list=!1},mail_change:function(o){var e=o.detail.value;this.product_cate=this.mail_list[e].name,this.show_mail_list=!1,1==this.mail_list[e].id&&(this.coupon_form.goods_ids=[0]),2==this.mail_list[e].id&&t.navigateTo({url:"../couponxuan/couponxuan"})},buy:function(o){var e=this;this.$api.http.post("user/pay_vip",{type:o}).then(function(o){e.$api.msg("购买成功"),setTimeout(function(){t.switchTab({url:"/pages/user/user"})},1500)})}}};o.default=u}).call(this,e("543d")["default"])},"50b7":function(t,o,e){"use strict";e.r(o);var n=e("3b14"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(o,t,function(){return n[t]})}(s);o["default"]=i.a},"58c2":function(t,o,e){"use strict";(function(t){e("c96d"),e("921b");n(e("66fd"));var o=n(e("29ed"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},bc2b:function(t,o,e){"use strict";var n=e("2467"),i=e.n(n);i.a}},[["58c2","common/runtime","common/vendor"]]]);