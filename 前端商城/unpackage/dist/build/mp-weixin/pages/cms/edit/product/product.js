(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cms/edit/product/product"],{"19ba":function(i,t,o){"use strict";var e=o("b9bb"),s=o.n(e);s.a},"3b62":function(i,t,o){"use strict";(function(i){o("c96d"),o("921b");e(o("66fd"));var t=e(o("6787"));function e(i){return i&&i.__esModule?i:{default:i}}i(t.default)}).call(this,o("543d")["createPage"])},6787:function(i,t,o){"use strict";o.r(t);var e=o("8b1e"),s=o("e601");for(var n in s)"default"!==n&&function(i){o.d(t,i,function(){return s[i]})}(n);o("19ba");var r=o("2877"),a=Object(r["a"])(s["default"],e["a"],e["b"],!1,null,null,null);t["default"]=a.exports},"737c":function(i,t,o){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o("cdc3");function s(i,t,o){return t in i?Object.defineProperty(i,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[t]=o,i}var n=function(){return o.e("components/uni/uni-icon/uni-icon").then(o.bind(null,"e761"))},r=function(){return o.e("components/uni/uni-popup/uni-popup").then(o.bind(null,"95aa"))},a=function(){return o.e("components/plan-image-upload/up_img").then(o.bind(null,"f8a2"))},c={data:function(){var i;return{groupList:"",group_id:"",pics:[],photos:[],c_pics:[],c_photos:[],serverUrl:e.Api_url+"up_img",DelServelUrl:e.Api_url+"del_img",formData:{use:"pro_banner",back:"idurl"},c_formData:{use:"pro_img",back:"idurl"},sku:[],show_cate_list:!1,show_mail_list:!1,category_name:"",category_list:[],id:0,is_edit:!1,goods:(i={banner_imgs:[],goods_name:"",category_id:"",description:"",price:"",vip_price:"",market_price:"",shipping_money:"",leixin:-1,fx_status:0,fx_tc:"",sales:"",stock:"",content:""},s(i,"goods_name",""),s(i,"shop_category_id",[]),s(i,"courier_type",[]),s(i,"c_imgs",[]),i),pro_num:[],guige:!1,radioItems:[{name:"快递邮寄",value:"0"},{name:"到店核销",value:"1"}],fxItems:[{name:"否",value:"0"},{name:"是",value:"1"}],market_price:"",price:"",vip_price:"",edit_group_id:"",fx_tc:"",mail:1,mail_list:[{id:"1",name:"快递发货"},{id:"2",name:"同城配送"},{id:"3",name:"到店自提"}],peisong:"",pro_group_name:[],group_list:[{id:"1",name:"未分组"},{id:"2",name:"A组"},{id:"3",name:"B组"}],group:"未分组"}},components:{uniIcon:n,uniPopup:r,robbyImageUpload:a},computed:{is_sku:function(){return!(this.pro_num.length>0)}},watch:{"goods.price":function(i,t){1*i>=1*this.goods.market_price&&(this.$api.msg("用户价需小于原价"),this.goods.price=1*this.goods.market_price-1)},"goods.vip_price":function(i,t){if(console.log(i),console.log(t),1*i>.95*this.goods.price){this.$api.msg("易卡价至少优惠5%");var o=950*this.goods.price/1e3;this.goods.vip_price=o.toFixed(2)}},"goods.fx_tc":function(i,t){1*i>.99*this.goods.vip_price&&(this.$api.msg("提成不能大于VIP价"),this.goods.fx_tc=1*this.goods.vip_price-1)}},onLoad:function(i){this._request(),this.id=i.id,this.get_groupList()},onShow:function(){var t=i.getStorageSync("groupList");this.groupList=t.groupList,this.group_id=t.group_id,t&&(this.goods.shop_category_id=t.group_id),t.group_name?this.group=t.group_name:this.group="未分组",i.removeStorageSync("groupList")},methods:{is_set_category:function(){this.show_cate_list=!0},get_market_price:function(i){this.market_price=i.target.value,console.log(this.market_price)},get_price:function(i,t){var o=this;this.price=i.target.value,1*this.price>1*this.market_price&&(this.$api.msg("用户价需小于原价"),o.sku[t].price=1*this.market_price-1,o.price=1*this.market_price-1)},get_vip_price:function(i,t){var o=this;this.vip_price=i.target.value,console.log(this.price),1*this.vip_price>.95*this.price&&(this.$api.msg("易卡价至少优惠5%"),o.sku[t].vip_price=950*this.price/1e3,o.vip_price=o.sku[t].vip_price.toFixed(2))},get_fx:function(i,t){var o=this;this.fx_tc=i.target.value,console.log(this.vip_price),1*this.fx_tc>.99*this.vip_price&&(this.$api.msg("提成不能大于VIP价"),o.sku[t].fx_tc=1*this.vip_price-1,o.fx_tc=1*o.vip_price-1)},_request:function(){var i=this;this.$api.http.get("category/get_category",{id:1}).then(function(t){i.category_list=t.data,i.id>0&&i.get_pro(i.id)})},get_pro:function(i){var t=this,o=this.category_list;this.is_edit=!0;var e=this;this.$api.http.get("/product/get_product",{id:i}).then(function(i){var s=i.data;for(var n in t.goods=s,t.pics=s.banner_imgs_list,t.photos=s.banner_imgs,t.c_pics=s.c_imgs_list,t.c_photos=s.c_imgs,s.shop_category_id&&s.shop_category_id[0]?t.edit_group_id=s.shop_category_id:t.edit_group_id="",console.log("aa:",t.edit_group_id),s.sku.json&&(t.sku=s.sku.json),0==s.style&&(t.mail=0),s.sku.json)e.pro_num.push(1);for(var r in o)o[r]["category_id"]==s.category_id&&(e.category_name=o[r].category_name);var a=[];for(var c in e.groupList){var u=e.groupList[c].id;a[u]=e.groupList[c].name}for(var p=0;p<e.edit_group_id.length;p++){var g=e.edit_group_id[p];t.pro_group_name[p]=a[g]}})},onImg:function(i){this.pics=i.allImages;var t=i.allImages;for(var o in t){var e=t[o].id;this.photos[o]=e}},onMove:function(i){this.pics=i;var t=i;for(var o in t){var e=t[o].id;this.photos[o]=e}console.log("move:",this.photos)},onMove_c:function(i){this.c_pics=i;var t=i;for(var o in t){var e=t[o].id;this.c_photos[o]=e}console.log("c_move:",this.c_photos)},delImage:function(i){var t=[];for(var o in i.allImages)t[o]=i.allImages[o].id;this.photos=t},c_onImg:function(i){var t=[];this.c_pics=i.allImages;var o=i.allImages;for(var e in o){var s=o[e].id;t.push(s)}this.c_photos=t,console.log(t)},c_delImage:function(i){var t=[];for(var o in console.log(i.allImages),i.allImages)t[o]=i.allImages[o].id;this.c_photos=t},sub:function(){var i=this;i.$api.msg("演示版-无权限")},sub_edit:function(){var t=this;console.log("sku:",this.sku),0!=this.sku.length?t.goods.sku=t.sku:t.goods.sku=[],t.goods.goods_id=this.id,this.goods.banner_imgs=this.photos,this.c_photos.length>0?this.goods.c_imgs=this.c_photos:this.goods.c_imgs=[],t.$api.http.post("shop/edit_product",t.goods).then(function(o){t.$api.msg("操作成功"),setTimeout(function(){i.redirectTo({url:"/pages/edit/pro_manage/pro_manage"})},1e3)})},leixin_chage:function(i){this.goods.leixin=i.detail.value,console.log(i),this.mail=i.detail.value,1==i.detail.value&&(this.peisong="")},fx_chage:function(i){console.log("xx:",i.detail.value),this.goods.fx_status=i.detail.value},tjge:function(){this.pro_num.push("1"),console.log("pri_num:",this.pro_num),this.sku.push({name:"",price:"",vip_price:"",fx_tc:"",market_price:""}),console.log("sku:",this.sku)},close:function(i){this.pro_num.splice(i,1),this.sku.splice(i,1),0!=this.sku.length&&0!=this.pro_num.length||(this.sku=[],this.pro_num=[])},compressImg:function(i){console.log(i)},changeIndicatorDots:function(i){this.isYasuo=!this.isYasuo},cate_change:function(i){console.log(i);var t=i.detail.value;for(var o in this.category_list)t==this.category_list[o].category_id&&(this.category_name=this.category_list[o].category_name,this.goods.category_id=this.category_list[o].category_id);this.show_cate_list=!1},mail_change:function(i){var t=this,o=i.target.value.map(String);console.log(o);var e=[];for(var s in o){var n=o[s];e[s]=t.mail_list[n].name+""}this.peisong=e.join(" "),this.goods.courier_type=e,console.log(this.peisong)},previewImage:function(){i.previewImage({urls:this.imgList})},buy:function(t){var o=this;this.$api.http.post("user/pay_vip",{type:t}).then(function(t){o.$api.msg("购买成功"),setTimeout(function(){i.switchTab({url:"/pages/user/user"})},1500)})}},onPullDownRefresh:function(){this._request(),this.get_groupList(),setTimeout(function(){i.stopPullDownRefresh()},2e3)}};t.default=c}).call(this,o("543d")["default"])},"8b1e":function(i,t,o){"use strict";var e=function(){var i=this,t=i.$createElement,e=(i._self._c,o("bf8e"));i._isMounted||(i.e0=function(t){i.show_mail_list=!0},i.e1=function(t){i.show_cate_list=!1},i.e2=function(t){i.show_mail_list=!1}),i.$mp.data=Object.assign({},{$root:{m0:e}})},s=[];o.d(t,"a",function(){return e}),o.d(t,"b",function(){return s})},b9bb:function(i,t,o){},e601:function(i,t,o){"use strict";o.r(t);var e=o("737c"),s=o.n(e);for(var n in e)"default"!==n&&function(i){o.d(t,i,function(){return e[i]})}(n);t["default"]=s.a}},[["3b62","common/runtime","common/vendor"]]]);