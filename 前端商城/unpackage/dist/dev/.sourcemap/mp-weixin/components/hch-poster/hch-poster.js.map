{"version":3,"sources":["webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?690a","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?a7ff","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?ed9c","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?b105","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?da8a","webpack:///H:/办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue?3d19"],"names":["data","props","canvasFlag","type","Boolean","default","posterObj","Object","url","icon","title","discountPrice","orignPrice","code","methods","roundRect","ctx","x","y","w","h","r","fillColor","strokeColor","btn","beginPath","arc","Math","PI","moveTo","lineTo","grd","createLinearGradient","addColorStop","setFillStyle","fill","setStrokeStyle","stroke","closePath","clip","canvasMultiLineText","text","contentWidth","lineNumber","textArray","split","temp","row","i","length","measureText","width","push","rowCut","slice","rowPart","test","empty","a","group","splice","codeImg","Promise","resolve","reject","request","method","header","version","$parent","globalData","scene","sku","page","then","res","fsm","wx","getFileSystemManager","FILE_BASE_NAME","filePath","env","USER_DATA_PATH","writeFile","encoding","success","fail","uni","showToast","duration","message","catch","createCanvasImage","console","log","showLoading","_this","phoneData","getSystemInfoSync","phoneH","windowHeight","phoneW","windowWidth","scaleW","scaleH","createCanvasContext","zpPriceIcon","closeBtn","draw","save","restore","getImageInfo","src","drawImage","path","setTimeout","setGlobalAlpha","setFontSize","font","contentTextY","leftSpace","textLineHeight","b","fillText","zpPrice","zpPriceW","orignPriceW","hideLoading","saveCanvasImage","canvasToTempFilePath","height","destWidth","destHeight","canvasId","saveImageToPhotosAlbum","tempFilePath","res2","canvasCancelEvn","$emit"],"mappings":"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","file":"components/hch-poster/hch-poster.js","sourcesContent":["import { render, staticRenderFns } from \"./hch-poster.vue?vue&type=template&id=51305630&\"\nimport script from \"./hch-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./hch-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./hch-poster.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"H:\\\\安装包\\\\0环境+开发\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('51305630', component.options)\n    } else {\n      api.reload('51305630', component.options)\n    }\n    module.hot.accept(\"./hch-poster.vue?vue&type=template&id=51305630&\", function () {\n      api.rerender('51305630', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"办公/++黔域项目/如花2.0/如花前端2.0/components/hch-poster/hch-poster.vue\"\nexport default component.exports","export * from \"-!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./hch-poster.vue?vue&type=template&id=51305630&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./hch-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./hch-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\n\t\t}\n\t},\n\tprops: {\n\t\tcanvasFlag: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tposterObj: {\n\t\t\ttype: Object,\n\t\t\tdefault: {\n\t\t\t\turl: '', //商品主图\n\t\t\t\ticon: 'https://img0.zuipin.cn/mp_zuipin/poster/hch-hyj.png', //会员价图标\n\t\t\t\ttitle: \"\", //标题\n\t\t\t\tdiscountPrice: \"\", //折后价格\n\t\t\t\torignPrice: \"\", //原价\n\t\t\t\tcode: 'https://img0.zuipin.cn/mp_zuipin/poster/hch-code.png', //小程序码\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t// 海报\n\t\t// 画圆角矩形 ctx、x起点、y起点、w宽度、h高度、r圆角半径、fillColor填充颜色、strokeColor边框颜色\n\t\troundRect(ctx, x, y, w, h, r, fillColor, strokeColor, btn) {\n\t\t\t// 开始绘制\n\t\t\tctx.beginPath()\n\t\t\t// 绘制左上角圆弧 Math.PI = 180度\n\t\t\t// 圆心x起点、圆心y起点、半径、以3点钟方向顺时针旋转后确认的起始弧度、以3点钟方向顺时针旋转后确认的终止弧度\n\t\t\tctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5)\n\t\t\t// 绘制border-top\n\t\t\t// 移动起点位置 x终点、y终点\n\t\t\tctx.moveTo(x + r, y)\n\t\t\t// 画一条线 x终点、y终点\n\t\t\tctx.lineTo(x + w - r, y)\n\t\t\t// 绘制右上角圆弧\n\t\t\tctx.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2)\n\t\t\t// 绘制border-right\n\t\t\tctx.lineTo(x + w, y + h - r)\n\t\t\t// 绘制右下角圆弧\n\n\t\t\tctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5)\n\n\t\t\t// 绘制左下角圆弧\n\n\t\t\tctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI)\n\n\t\t\t// 绘制border-left\n\t\t\tctx.lineTo(x, y + r)\n\t\t\tif (btn == 'btn') {\n\t\t\t\tconst grd = ctx.createLinearGradient(0, 0, 200, 0) //渐变色\n\t\t\t\tgrd.addColorStop(0, fillColor)\n\t\t\t\tgrd.addColorStop(1, strokeColor)\n\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\tctx.setFillStyle(grd)\n\t\t\t\t// 对绘画区域填充\n\t\t\t\tctx.fill()\n\t\t\t} else {\n\n\t\t\t\tif (fillColor) {\n\t\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\t\tctx.setFillStyle(fillColor)\n\t\t\t\t\t// 对绘画区域填充\n\t\t\t\t\tctx.fill()\n\t\t\t\t}\n\t\t\t\tif (strokeColor) {\n\t\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\t\tctx.setStrokeStyle(strokeColor)\n\t\t\t\t\t// 画出当前路径的边框\n\t\t\t\t\tctx.stroke()\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 关闭一个路径\n\t\t\tctx.closePath()\n\t\t\t// 剪切，剪切之后的绘画绘制剪切区域内进行，需要save与restore 这个很重要 不然没办法保存\n\t\t\tctx.clip()\n\t\t},\n\n\t\t/**\n\t\t * canvas绘图相关，把文字转化成只能行数，多余显示省略号\n\t\t * ctx: 当前的canvas\n\t\t * text: 文本\n\t\t * contentWidth: 文本最大宽度\n\t\t * lineNumber: 显示几行\n\t\t */\n\t\tcanvasMultiLineText(ctx, text, contentWidth, lineNumber) {\n\t\t\tvar textArray = text.split(\"\"); // 分割成字符串数组\n\t\t\tvar temp = \"\";\n\t\t\tvar row = [];\n\t\t\tfor (let i = 0; i < textArray.length; i++) {\n\t\t\t\tif (ctx.measureText(temp).width < contentWidth) {\n\t\t\t\t\ttemp += textArray[i];\n\t\t\t\t} else {\n\t\t\t\t\ti--; // 这里添加i--是为了防止字符丢失\n\t\t\t\t\trow.push(temp);\n\t\t\t\t\ttemp = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.push(temp);\n\n\t\t\t// 如果数组长度大于2，则截取前两个\n\t\t\tif (row.length > lineNumber) {\n\t\t\t\tvar rowCut = row.slice(0, lineNumber);\n\t\t\t\tvar rowPart = rowCut[1];\n\t\t\t\tvar test = \"\";\n\t\t\t\tvar empty = [];\n\t\t\t\tfor (var a = 0; a < rowPart.length; a++) {\n\t\t\t\t\tif (ctx.measureText(test).width < contentWidth) {\n\t\t\t\t\t\ttest += rowPart[a];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tempty.push(test); // 处理后面加省略号\n\t\t\t\tvar group = empty[0] + '...'\n\t\t\t\trowCut.splice(lineNumber - 1, 1, group);\n\t\t\t\trow = rowCut;\n\t\t\t}\n\t\t\treturn row;\n\t\t},\n\t\t// 获取海报的小程序码\n\t\tcodeImg() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\trequest({\n\t\t\t\t\tmethod: 'get',\n\t\t\t\t\turl: '/spSupport/getwxacodeunlimit',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tversion: this.$parent.globalData.version,\n\t\t\t\t\t\tscene: `sku=${this.sku}`,\n\t\t\t\t\t\tpage: \"pages/product/detail\",\n\t\t\t\t\t\twidth: \"128px\",\n\t\t\t\t\t},\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif (res.data.code == 0) {\n\t\t\t\t\t\tconst fsm = wx.getFileSystemManager();\n\t\t\t\t\t\tconst FILE_BASE_NAME = 'tmp_img_src';\n\t\t\t\t\t\tlet filePath = `${wx.env.USER_DATA_PATH}/${FILE_BASE_NAME}.jpg`;\n\t\t\t\t\t\tfsm.writeFile({\n\t\t\t\t\t\t\tfilePath,\n\t\t\t\t\t\t\tdata: res.data.data,\n\t\t\t\t\t\t\tencoding: 'binary',\n\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\tresolve(filePath)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\t\tthis.canvasFlag = true;\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.message,\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.canvasFlag = true;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\t// 生成海报\n\t\tcreateCanvasImage() {\n\t\t\tconsole.log(this.posterObj, 'posterObj')\n\t\t\t// this.canvasFlag=false;\n\t\t\t// this.deliveryFlag = false;//关闭分享的弹窗\n\t\t\tconsole.log(\"海报生成中\")\n\t\t\twx.showLoading({\n\t\t\t\ttitle: '海报生成中...'\n\t\t\t})\n\t\t\tlet _this = this;\n\t\t\tlet phoneData = wx.getSystemInfoSync();\n\t\t\tthis.phoneH = phoneData.windowHeight-150;\n\t\t\tthis.phoneW = phoneData.windowWidth;\n\t\t\tlet scaleW = this.phoneW / 375; //按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n\t\t\tlet scaleH = this.phoneH / 667; //按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n\t\t\tconsole.log(this.phoneH, this.phoneW)\n\t\t\tconst ctx = wx.createCanvasContext('myCanvas');\n\t\t\tlet url = this.posterObj.url; //商品主图\n\t\t\tlet zpPriceIcon = this.posterObj.icon //图标\n\t\t\tlet code = this.posterObj.code\n\t\t\tlet closeBtn = 'https://imgzuipin.oss-cn-hangzhou.aliyuncs.com/mp_zuipin/poster/close_btn.png'\n\t\t\tconsole.log(ctx)\n\t\t\tconsole.log(this)\n\n\t\t\tctx.draw() //清空原来的画图内容\n\t\t\tctx.save();\n\t\t\tthis.roundRect(ctx, 50, 100, (this.phoneW - 100), (this.phoneH - 130), 10, '#fff', '#fff'); //绘制海报圆角背景白色的\n\t\t\tctx.restore(); //恢复之前保存的绘图上下文 恢复之前保存的绘图上下午即状态 可以继续绘制\n\t\t\tctx.save();\n\t\t\tthis.roundRect(ctx, 50, 100, (this.phoneW - 100), (370) * scaleH, 10, '#f7f7f7', '#f7f7f7'); //绘制海报圆角背景 上半截灰色的\n\t\t\tctx.restore();\n\t\t\t//将网络图片转成本地路径 商品图片\n\t\t\twx.getImageInfo({\n\t\t\t\tsrc: url,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tctx.save();\n\t\t\t\t\t//覆盖绘制\n\t\t\t\t\t//问题：在微信小程序使用canvas绘制圆角图片时，微信调试工具正常显示，android真机都不显示。\n\t\t\t\t\t// 原因：因为ctx.clip()剪切区域使用的填充颜色是透明的，所以图片没出来。\n\t\t\t\t\t// 解决方案：将剪切区域设置成实体颜色就好了。\n\t\t\t\t\t_this.roundRect(ctx, (_this.phoneW - ((_this.phoneW - 130))) / 2, 120,\n\t\t\t\t\t (_this.phoneW - 130),230 * scaleH, 10,\n\t\t\t\t\t\t'#f7f7f7', '#f7f7f7') //绘制图片圆角背景\n\t\t\t\t\tctx.drawImage(res.path, (_this.phoneW - ((_this.phoneW - 130))) / 2, 120, (_this.phoneW - 130), 230 * scaleH, 10); //绘制图\n\t\t\t\t\tctx.restore(); //恢复之前保存的绘图上下文 恢复之前保存的绘图上下午即状态 可以继续绘制\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\t_this.canvasFlag = true;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 关闭按钮\n\t\t\twx.getImageInfo({\n\t\t\t\tsrc: closeBtn,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tctx.drawImage(res.path, 50 + (_this.phoneW - 100) + 5, 100, 24, 24)\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\t_this.canvasFlag = true;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 关闭按钮 end\n\t\t\t// 海报商品title\n\t\t\tsetTimeout(() => {\n\t\t\t\tctx.setGlobalAlpha(1) //不透明\n\t\t\t\tctx.setFillStyle('#1c1c1c') //文字颜色：默认黑色\n\t\t\t\tctx.setFontSize(14) //设置字体大小，默认10\n\t\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\t\tlet text = this.posterObj.title;\n\t\t\t\tlet row = this.canvasMultiLineText(ctx, text, (this.phoneW - 130), 2); //计算绘制的2行文本\n\t\t\t\tlet contentTextY = 360; // 这段文字起始的y位置\n\t\t\t\tlet leftSpace = 65; // 这段文字起始的X位置\n\t\t\t\tlet textLineHeight = 18; // 一行文字加一行行间距\n\t\t\t\tfor (let b = 0; b < row.length; b++) { //一行一行绘制文本\n\t\t\t\t\tctx.fillText(row[b], leftSpace, (contentTextY + textLineHeight * b - 15) * scaleH+60, (this.phoneW - 130));\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t}\n\t\t\t}, 500)\n\t\t\t// 海报商品title end\n\t\t\t// 会员价 图标\n\t\t\twx.getImageInfo({\n\t\t\t\tsrc: zpPriceIcon,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tctx.drawImage(res.path, 65, 460 * scaleH, 44, 15)\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\t_this.canvasFlag = true;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 会员价 图标 end\n\t\t\t//绘制价格\n\t\t\tctx.setFontSize(12) //设置字体大小，默认10\n\t\t\tctx.setFillStyle('#c00000') //文字颜色：默认黑色\n\t\t\tctx.font = 'normal 12px sans-serif';\n\t\t\tctx.fillText('￥', 110, 476 * scaleH, 60);\n\t\t\tctx.setFontSize(16) //设置字体大小，默认10\n\t\t\tlet zpPrice = this.posterObj.discountPrice; //会员价格\n\t\t\tlet orignPrice = this.posterObj.orignPrice; //市场价\n\n\t\t\tlet zpPriceW = ctx.measureText(zpPrice).width; //文本的宽度\n\t\t\tctx.fillText(zpPrice, 120, 476 * scaleH, zpPriceW);\n\n\t\t\tctx.beginPath(); //开始一个新的路径\n\t\t\tctx.setFontSize(10) //设置字体大小，默认10\n\t\t\tctx.setFillStyle('#999') //文字颜色：默认黑色\n\t\t\tlet orignPriceW = ctx.measureText(orignPrice).width //去掉市场价\n\t\t\tctx.fillText(`￥${orignPrice}`, 120 + zpPriceW + 5, 475 * scaleH, orignPriceW); //5价格间距\n\t\t\tctx.moveTo(120 + zpPriceW + 5, 470 * scaleH); //设置线条的起始路径坐标\n\t\t\tctx.lineTo(120 + zpPriceW + 5 + orignPriceW, 470 * scaleH); //设置线条的终点路径坐标\n\t\t\tctx.setStrokeStyle('#999')\n\t\t\tctx.stroke(); //对当前路径进行描边\n\t\t\tctx.closePath(); //关闭当前路径\n\t\t\t//绘制价格 end\n\t\t\t// this.codeImg().then((res)=>{\n\t\t\t// 小程序码\n\t\t\twx.getImageInfo({\n\t\t\t\tsrc: code,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tctx.drawImage(res.path, (_this.phoneW - 70) / 2, 490 * scaleH, 70, 70)\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\t_this.canvasFlag = true;\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '海报生成失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t})\n\t\t\t// });\n\n\t\t\t// 小程序码end\n\t\t\t// 小程序的名称\n\t\t\tctx.setFontSize(14)\n\t\t\tctx.setFillStyle('#2f1709') //文字颜色：默认黑色\n\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\tctx.fillText('小程序的名称', (_this.phoneW - 90) / 2, 590 * scaleH, 90);\n\t\t\t// 小程序的名称end\n\t\t\t// 长按/扫描识别查看商品\n\t\t\t// ctx.setFontSize(14)\n\t\t\t// ctx.setFillStyle('#ff5f33') //文字颜色：默认黑色\n\t\t\t// ctx.font = 'normal 14px sans-serif';\n\t\t\t// ctx.fillText('长按/扫描识别查看商品', (_this.phoneW - 140) / 2, 550 * scaleH, 140);\n\t\t\t// 长按/扫描识别查看商品end\n\t\t\t//绘制保存按钮\n\t\t\tctx.save();\n\t\t\tthis.roundRect(ctx, (this.phoneW - 160) / 2, (this.phoneH - 55)+60, 160, 36, 18, '#ff3600', '#ff6a00', 'btn')\n\t\t\tctx.restore();\n\t\t\tctx.setFontSize(14)\n\t\t\tctx.setFillStyle('#fff') //文字颜色：默认黑色\n\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\tctx.fillText('保存图片', (_this.phoneW - 58) / 2, (this.phoneH - 33)+60, 58);\n\t\t\t//绘制保存按钮 end\n\t\t\twx.hideLoading();\n\t\t},\n\n\t\t// 保存到系统相册\n\t\tsaveCanvasImage() {\n\t\t\tconsole.log('点击了保存')\n\t\t\twx.showLoading({\n\t\t\t\ttitle: '保存中...'\n\t\t\t})\n\t\t\tlet _this = this;\n\t\t\t// 1-把画布转化成临时文件\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tx: 50,\n\t\t\t\ty: 40,\n\t\t\t\twidth: (this.phoneW - 100), // 画布的宽\n\t\t\t\theight: (this.phoneH - 120), // 画布的高\n\t\t\t\tdestWidth: (this.phoneW - 100) * 5,\n\t\t\t\tdestHeight: (this.phoneH - 120) * 5,\n\t\t\t\tcanvasId: 'myCanvas',\n\t\t\t\tsuccess(res) {\n\t\t\t\t\t// 2-保存图片至相册\n\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\tsuccess(res2) {\n\t\t\t\t\t\t\twx.hideLoading();\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '图片保存成功，可以去分享啦~',\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t_this.canvasCancelEvn();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '保存失败，稍后再试',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\twx.hideLoading();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '保存失败，稍后再试',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 取消海报\n\t\tcanvasCancelEvn() {\n\t\t\tconsole.log('关闭海报')\n\t\t\tthis.$emit('cancel', true)\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./hch-poster.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../安装包/0环境+开发/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./hch-poster.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}